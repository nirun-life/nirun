<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright (c) 2023-2023. NSTDA
  -->
<odoo>
    <record id="encounter_view_form_inherit" model="ir.ui.view">
        <field name="name">ni.encounter.view.form.inherit</field>
        <field name="model">ni.encounter</field>
        <field name="inherit_id" ref="nirun_careplan.encounter_view_form_inherit" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='careplan_ids']/tree" position="attributes">
                <attribute name="decoration-muted">state in ['revoked', 'replaced']</attribute>
            </xpath>
            <xpath expr="//field[@name='careplan_ids']/tree/button[@name='action_revoked']" position="after">
                <button
                    name="action_replace_wizard"
                    class="text-primary"
                    type="object"
                    string="Replace"
                    icon="fa-repeat"
                    attrs="{'invisible': [('state', 'not in', ['active', 'on-hold'])], 'column_invisible': [('parent.state', '!=', 'in-progress')]}"
                />
            </xpath>
        </field>
    </record>
</odoo>
