<?xml version="1.0" encoding="utf-8" ?>
<!--
  ~ Copyright (c) 2021 NSTDA
  -->
<odoo>
    <record id="service_action" model="ir.actions.act_window">
        <field name="name">Healthcare Services</field>
        <field name="res_model">ni.service</field>
        <field name="view_mode">tree,form</field>
    </record>
    <record id="service_view_search" model="ir.ui.view">
        <field name="name">service.view.search</field>
        <field name="model">ni.service</field>
        <field name="arch" type="xml">
            <search>
                <field name="name" />
                <field name="category_ids" />
            </search>
        </field>
    </record>
    <record id="service_view_form" model="ir.ui.view">
        <field name="name">service.view.form</field>
        <field name="model">ni.service</field>
        <field name="arch" type="xml">
            <form>
                <field name="id" invisible="1" />
                <field name="active" invisible="1" />
                <header invisible="context.get('no_header')" />
                <sheet>
                    <div name="button_box" class="oe_button_box" groups="base.group_user">
                        <button name="open_request" class="oe_stat_button" icon="fa-users" type="object">
                            <field name="request_count" widget="statinfo" />
                        </button>
                    </div>
                    <widget
                        name="web_ribbon"
                        attrs="{'invisible': [('active', '=', True)]}"
                        bg_color="bg-danger"
                        title="Archived"
                    />
                    <field name="image_1920" class="oe_avatar" options='{"preview_image":"image_128"}' widget='image' />
                    <div class="oe_title">
                        <h1>
                            <field name="name" placeholder="Service Name" />
                        </h1>
                    </div>
                    <field
                        name="category_ids"
                        options="{'color_field': 'color', 'no_create_edit': True}"
                        placeholder="Category..."
                        widget="many2many_tags"
                    />
                    <group>
                        <group>
                            <field name="code" placeholder="Internal Reference" groups="nirun_service.group_manager" />
                            <field name="company_id" groups="base.group_multi_company" placeholder="Company" />
                        </group>
                    </group>
                    <notebook>
                        <page string="Available Time">
                            <field
                                name="available_type"
                                class="oe_edit_only"
                                options="{'horizontal': True}"
                                widget="radio"
                            />
                            <group
                                name="available_time_ids"
                                attrs="{'invisible': [('available_type', '!=', 'routine')]}"
                            >
                                <field name="available_time_ids" context="{'default_service_id': id}" nolabel="1">
                                    <tree>
                                        <field name="display_day" />
                                        <field name="display_time" />
                                        <field name="tz" />
                                    </tree>
                                    <form>
                                        <group>
                                            <group>
                                                <field name="everyday" />
                                                <field name="day_of_week" widget="many2many_checkboxes" />
                                            </group>
                                            <group>
                                                <field name="all_day" />
                                                <field
                                                    name="start_time"
                                                    attrs="{'invisible': [('all_day', '=', True)]}"
                                                    widget="float_time"
                                                />
                                                <field
                                                    name="end_time"
                                                    attrs="{'invisible': [('all_day', '=', True)]}"
                                                    widget="float_time"
                                                />
                                                <field name="tz" attrs="{'invisible': [('all_day', '=', True)]}" />
                                            </group>
                                        </group>
                                    </form>
                                </field>
                            </group>
                            <group
                                name="available_timing_ids"
                                attrs="{'invisible': [('available_type', '!=', 'event')]}"
                            >
                                <field name="available_timing_ids" context="{'default_service_id': id}" nolabel="1">
                                    <tree>
                                        <field name="name" string="Recurrent" />
                                        <field name="timing_id" />
                                        <field name="bound_start" />
                                        <field name="bound_end" />
                                    </tree>
                                </field>
                            </group>
                            <label for="availability_exceptions" />
                            <field name="availability_exceptions" />
                        </page>
                        <page name="location" string="Location">
                            <field name="location_ids">
                                <tree editable="bottom">
                                    <field name="display_name" />
                                </tree>
                            </field>
                        </page>
                        <page name="procedure" string="Procedure" groups="nirun_service.group_manager">
                            <div>
                                <field name="is_procedure" />
                                <label for="is_procedure" string="Procedure" />
                            </div>
                            <group>
                                <group attrs="{'invisible': [('is_procedure', '=', False)]}" string="Default Values">
                                    <field name="procedure_code_id" string="Code" />
                                    <field name="procedure_category_id" string="Category" />
                                    <field name="procedure_outcome_id" string="Outcome" widget="radio" />
                                </group>
                            </group>
                        </page>
                        <page name="product" string="Product" groups="product.group_product_pricelist">
                            <div>
                                <field name="sale_ok" />
                                <label for="sale_ok" />
                            </div>
                            <div>
                                <field name="purchase_ok" />
                                <label for="purchase_ok" />
                            </div>
                            <group>
                                <group name="product_gen" string="General Information">
                                    <field name="type" />
                                    <field name="categ_id" readonly="True" />
                                    <field name="list_price" />
                                    <field name="standard_price" />
                                    <field name="uom_id" groups="uom.group_uom" options="{'no_create': True}" />
                                    <field name="uom_po_id" invisible="1" />
                                    <label for="default_code" />
                                    <div>
                                        <field name="default_code" />
                                        <i class="text-muted oe_edit_only">
                                            Use this reference as a subject prefix when
                                            submitting by email.
                                        </i>
                                    </div>
                                    <field name="company_id" groups="base.group_multi_company" />
                                </group>
                            </group>
                        </page>
                        <page string="Internal Note">
                            <field name="comment" />
                        </page>
                    </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user" widget="mail_followers" />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </form>
        </field>
    </record>
    <record id="service_view_tree" model="ir.ui.view">
        <field name="name">service.view.tree</field>
        <field name="model">ni.service</field>
        <field name="arch" type="xml">
            <tree string="Healthcare Service">
                <field name="name" />
                <field name="code" optional="hide" />
                <field name="category_ids" optional="show" options="{'color_field': 'color'}" widget="many2many_tags" />
                <field name="available_time_ids" optional="show" widget="many2many_tags" />
                <field name="location_ids" optional="hide" widget="many2many_tags" />
                <field name="request_count" />
            </tree>
        </field>
    </record>
</odoo>
