<?xml version="1.0" encoding="utf-8" ?>
<!--
  ~ Copyright (c) 2021 Piruin P.
  -->
<odoo>
    <record id="partner_view_form_inherit_relate" model="ir.ui.view">
        <field name="name">partner.view.form.inherit.relate</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            <!--Relationship-->
            <field name="type" position="before">
                <field name="relate_person" invisible="1" />
                <field
                    name="relationship_id"
                    attrs="{'invisible': [('relate_person', '!=', True)]}"
                    options="{'no_create':True, 'no_open':True}"
                    readonly="context.get('default_relationship_id')"
                />
            </field>
            <!--Address field -->
            <field name="street" position="before">
                <button
                    name="action_copy_parent_address"
                    attrs="{'invisible': ['|', ('type', '=', 'contact'), ('parent_id', '=', False)]}"
                    class='oe_edit_only btn-link'
                    type="object"
                >
                    <span class="fa fa-pencil-square-o" />
                    Use same address
                </button>
            </field>
            <!--Contacts & Address page, [child_ids] in-line form -->
            <xpath expr="//notebook/page[1]/field/form/sheet/group/group[1]/field[@name='title']" position="after">
                <field name="relate_person" invisible="1" />
                <field
                    name="relationship_id"
                    attrs="{'invisible': [('relate_person', '!=', True)]}"
                    options="{'no_create':True, 'no_open':True}"
                />
            </xpath>
        </field>
    </record>
    <record id="res_partner_view_form_related_person" model="ir.ui.view">
        <field name="name">res.partner.view.form.related.person</field>
        <field name="model">res.partner</field>
        <field name="priority" eval="300" />
        <field name="arch" type="xml">
            <form string="Private Address Form">
                <sheet>
                    <field name="type" invisible="True" required="1" />
                    <field
                        name="image_1920"
                        class="oe_avatar"
                        nolabel="1"
                        options="{'image_preview': 'image_128'}"
                        widget="image"
                    />
                    <div class="oe_title">
                        <h2>
                            <field
                                name="name"
                                string="Contact Name"
                                attrs="{'required' : [('type', '=', 'contact')]}"
                                required="True"
                            />
                        </h2>
                    </div>
                    <field name="company_id" invisible="1" />
                    <div name='div_parent' class='oe_readonly'>
                        <label string="Patient" for="parent_id" />
                        <field name="parent_id" options="{'no_open': True}" readonly="1" />
                        <button name="action_copy_parent_address" class='oe_edit_only btn-link' type="object">
                            <span class="fa fa-pencil-square-o" />
                            Same Address
                        </button>
                    </div>
                    <group col="12">
                        <group colspan="7">
                            <field name="title" placeholder="e.g. Mr." />
                            <label string="Address" for="street" />
                            <div>
                                <div name="div_address" class="o_address_format">
                                    <field name="street" class="o_address_street" placeholder="Street..." />
                                    <field name="street2" class="o_address_street" placeholder="Street 2..." />
                                    <field name="city" class="o_address_city" placeholder="City" />
                                    <field
                                        name="state_id"
                                        class="o_address_state"
                                        context="{'country_id': country_id, 'zip': zip}"
                                        options='{"no_open": True}'
                                        placeholder="State"
                                    />
                                    <field name="zip" class="o_address_zip" placeholder="ZIP" />
                                    <field
                                        name="country_id"
                                        class="o_address_country"
                                        options='{"no_open": True, "no_create": True}'
                                        placeholder="Country"
                                    />
                                </div>
                            </div>
                            <field name="comment" placeholder="Internal notes..." />
                        </group>
                        <group colspan="5">
                            <field name="function" placeholder="e.g. Sales Director" />
                            <field name="email" widget="email" />
                            <field name="phone" widget="phone" />
                            <field name="mobile" widget="phone" />
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
    </record>
</odoo>
